# WT9011 BLE Sensor Control

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞—Ç—á–∏–∫–æ–º WT9011 —á–µ—Ä–µ–∑ Bluetooth Low Energy (BLE). –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å –∞–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä–∞, –≥–∏—Ä–æ—Å–∫–æ–ø–∞, —É–≥–ª–æ–≤ –ø–æ–≤–æ—Ä–æ—Ç–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –¥–∞—Ç—á–∏–∫–∞.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üì° **BLE –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –¥–∞—Ç—á–∏–∫–∞–º WT9011
- üìä **–ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**: –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∞–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä–∞, –≥–∏—Ä–æ—Å–∫–æ–ø–∞ –∏ —É–≥–ª–æ–≤ –ø–æ–≤–æ—Ä–æ—Ç–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚öôÔ∏è **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞, –æ–±–Ω—É–ª–µ–Ω–∏–µ, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —á–∞—Å—Ç–æ—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- üíæ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ**: –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ JSON –∏ CSV —Ñ–æ—Ä–º–∞—Ç—ã
- üñ•Ô∏è **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã**: –ö–æ–Ω—Å–æ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ PyQt5

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
WT9011-BLE-Control/
‚îú‚îÄ‚îÄ lib/                     # –û—Å–Ω–æ–≤–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ ble_manager.py      # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ BLE –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º
‚îÇ   ‚îú‚îÄ‚îÄ sensor_parser.py    # –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö –¥–∞—Ç—á–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ sensor_commands.py  # –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞—Ç—á–∏–∫–æ–º
‚îÇ   ‚îî‚îÄ‚îÄ README.md          # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
‚îú‚îÄ‚îÄ examples/               # –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ example_data.py    # –ü—Ä–æ—Å—Ç–æ–µ —á—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ example_functions.py # –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ example_ui.py      # –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ   ‚îî‚îÄ‚îÄ README.md         # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–∏–º–µ—Ä–æ–≤
‚îî‚îÄ‚îÄ README.md             # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install bleak rich pyqt5 pyqtgraph qasync
```

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
import asyncio
from lib.ble_manager import BLEManager
from lib.sensor_parser import WT9011Parser

async def main():
    parser = WT9011Parser()
    ble = BLEManager()
    
    # –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
    devices = await ble.scan()
    if devices:
        # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ø–µ—Ä–≤–æ–º—É –Ω–∞–π–¥–µ–Ω–Ω–æ–º—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É
        await ble.connect(devices[0]["address"])
        
        # –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
        def on_data(data: bytearray):
            parsed = parser.parse(data)
            if parsed:
                print(f"–ê–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä: {parsed['accel']}")
                print(f"–ì–∏—Ä–æ—Å–∫–æ–ø: {parsed['gyro']}")
                print(f"–£–≥–ª—ã: {parsed['angle']}")
        
        # –ù–∞—á–∞–ª–æ –ø—Ä–∏–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö
        await ble.receive(on_data)
        
        # –û–∂–∏–¥–∞–Ω–∏–µ (Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏)
        await asyncio.sleep(3600)
        
        await ble.disconnect()

if __name__ == "__main__":
    asyncio.run(main())
```

## –ü—Ä–∏–º–µ—Ä—ã

### 1. –ü—Ä–æ—Å—Ç–æ–µ —á—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
```bash
python examples/example_data.py
```
–ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏ —á—Ç–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º –≤—ã–±–æ—Ä–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.

### 2. –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
```bash
python examples/example_functions.py
```
–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞—Ç—á–∏–∫–æ–º.

### 3. –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
```bash
python examples/example_ui.py
```
–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ GUI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ
- **–ê–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä**: ¬±16g, —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ 16 –±–∏—Ç
- **–ì–∏—Ä–æ—Å–∫–æ–ø**: ¬±2000¬∞/—Å, —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ 16 –±–∏—Ç  
- **–£–≥–ª—ã –ø–æ–≤–æ—Ä–æ—Ç–∞**: Roll, Pitch, Yaw (-180¬∞ –¥–æ +180¬∞)

### –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –û–±–Ω—É–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª–æ–∂–µ–Ω–∏—è
- –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –∞–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä–∞ –∏ –≥–∏—Ä–æ—Å–∫–æ–ø–∞
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–º —Å–Ω–∞/–ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–∞—Å—Ç–æ—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (1-100 –ì—Ü)
- –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –¥–∞—Ç—á–∏–∫–æ–≤
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ –ø–∞–º—è—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- –°–±—Ä–æ—Å –∫ –∑–∞–≤–æ–¥—Å–∫–∏–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º

## –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–∞ –¥–∞–Ω–Ω—ã—Ö (20 –±–∞–π—Ç)
```
–ë–∞–π—Ç—ã 0-1:   –ó–∞–≥–æ–ª–æ–≤–æ–∫ (0x55, 0x61)
–ë–∞–π—Ç—ã 2-7:   –ê–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä X,Y,Z (int16, little-endian)
–ë–∞–π—Ç—ã 8-13:  –ì–∏—Ä–æ—Å–∫–æ–ø X,Y,Z (int16, little-endian)  
–ë–∞–π—Ç—ã 14-19: –£–≥–ª—ã Roll,Pitch,Yaw (int16, little-endian)
```

### –§–æ—Ä–º–∞—Ç –∫–æ–º–∞–Ω–¥ (4 –±–∞–π—Ç–∞)
```
–ë–∞–π—Ç 0:    0xFF (—Å—Ç–∞—Ä—Ç–æ–≤—ã–π –±–∞–π—Ç)
–ë–∞–π—Ç 1:    0xAA (–∞–¥—Ä–µ—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)
–ë–∞–π—Ç 2:    –ö–æ–¥ –∫–æ–º–∞–Ω–¥—ã
–ë–∞–π—Ç 3:    –ü–∞—Ä–∞–º–µ—Ç—Ä –∫–æ–º–∞–Ω–¥—ã
```

## –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Python**: 3.7+
- **–û–°**: Windows 10+, macOS 10.15+, Linux —Å BlueZ
- **Bluetooth**: BLE 4.0+

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- `bleak` - BLE –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è
- `rich` - –∫—Ä–∞—Å–∏–≤—ã–π –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å
- `pyqt5` - –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `pyqtgraph` - –≥—Ä–∞—Ñ–∏–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `qasync` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è asyncio —Å Qt (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–∞—Ç—á–∏–∫ –≤–∫–ª—é—á–µ–Ω –∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ —Å–æ–ø—Ä—è–∂–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Bluetooth –≤–∫–ª—é—á–µ–Ω –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ
- –ù–∞ Linux —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –≥—Ä—É–ø–ø–µ `bluetooth`

### –û—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –ó–∞–∫—Ä–æ–π—Ç–µ –¥—Ä—É–≥–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ Bluetooth
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Bluetooth –∞–¥–∞–ø—Ç–µ—Ä
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–∞—Ç—á–∏–∫ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ –¥—Ä—É–≥–æ–º—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É

### –ü—Ä–æ–±–ª–µ–º—ã —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è–º–∏ (Linux)
```bash
sudo usermod -a -G dialout $USER
sudo systemctl enable bluetooth
sudo systemctl start bluetooth
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. —Ñ–∞–π–ª LICENSE –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ `lib/README.md` –∏ `examples/README.md`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –≤–∞—à–µ–π –≤–µ—Ä—Å–∏–µ–π Python –∏ –û–°

## Changelog

### v1.0.0
- –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å BLE –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö –∞–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä–∞, –≥–∏—Ä–æ—Å–∫–æ–ø–∞ –∏ —É–≥–ª–æ–≤
- –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –ö–æ–Ω—Å–æ–ª—å–Ω—ã–µ –∏ GUI –ø—Ä–∏–º–µ—Ä—ã
- –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ JSON/CSV